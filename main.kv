ScreenManager:
    PantallaInicio:
    PantallaRegistro:
    PantallaCamaras:

<PantallaInicio>:
    name: "inicio"
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        spacing: dp(15)
        padding: dp(20)
        size_hint_y: None
        height: self.minimum_height
        pos_hint: {"center_x": 0.5, "center_y": 0.5}

        MDButton:
            style: "filled"
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release: root.ir_a_registro()
            MDButtonText:
                text: "Registrar Temperatura"

        MDButton:
            style: "filled"
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release: root.ir_a_camaras()
            MDButtonText:
                text: "Nueva Cámara"

<PantallaRegistro>:
    name: "registro"
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        spacing: dp(15)
        padding: dp(20)
        size_hint_y: None
        height: self.minimum_height
        pos_hint: {"center_x": 0.5, "center_y": 0.5}

        MDTextField:
            id: camara_input
            mode: "outlined"
            size_hint_x: None
            width: "240dp"
            pos_hint: {"center_x": .5, "center_y": .5}
            on_focus: if self.focus: app.root.get_screen('registro').abrir_menu(self)

            MDTextFieldLeadingIcon:
                icon: "magnify"

            MDTextFieldHintText:
                text: "Cámara"

        MDTextField:
            id: temp_input
            mode: "outlined"
            size_hint_x: None
            width: "240dp"
            pos_hint: {"center_x": .5, "center_y": .5}
            
            MDTextFieldLeadingIcon:
                icon: "thermometer"

            MDTextFieldHintText:
                text: "Temperatura (ºC)"

        MDButton:
            style: "filled"
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release: root.guardar_datos()
            MDButtonText:
                text: "Guardar"

        MDButton:
            style: "filled"
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release: root.volver_inicio()
            MDButtonText:
                text: "Volver"

<PantallaCamaras>:
    name: "camaras"
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        spacing: dp(15)
        padding: dp(20)
        size_hint_y: None
        height: self.minimum_height
        pos_hint: {"center_x": 0.5, "center_y": 0.5}

        MDTextField:
            id: nombre_camara
            mode: "outlined"
            size_hint_x: .8
            pos_hint: {"center_x": .5, "center_y": .5}
            
            MDTextFieldLeadingIcon:
                icon: "dots-horizontal"

            MDTextFieldHintText:
                text: "Nombre de la Cámara"

        MDTextField:
            id: tipo_camara
            mode: "outlined"
            size_hint_x: .8
            pos_hint: {"center_x": .5, "center_y": .5}
            on_focus: if self.focus: app.root.get_screen('camaras').abrir_menu(self)
            
            MDTextFieldLeadingIcon:
                icon: "magnify"

            MDTextFieldHintText:
                text: "Tipo de Cámara"

        MDButton:
            style: "filled"
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release: root.guardar_camara()
            MDButtonText:
                text: "Guardar Cámara"

        MDButton:
            style: "filled"
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release: root.volver_inicio()
            MDButtonText:
                text: "Volver"
